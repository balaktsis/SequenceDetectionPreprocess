# SIESTA Preprocess Component
This module is responsible to create the indices that are then utilized by the query processor
to respond fast in pattern queries. Along with the generation of the SIESTA indices, we have implemented
the preprocess for both Signature and Set-Containment methods.

## Execute program using docker
1. **Build docker image:** On the top level of the project execute the command ```docker build -t preprocess .```
2. **Run image**: After image was built it can be run with ```docker run preprocess```
The program provides a range of parameters that can be set as arguments during execution. 
The default execution will generate 100 synthetic traces, using 10 different event types, and lengths that vary from 10 to 90 events.
It is a good way to evaluate that the build was successful.

```
Usage: preprocess.jar [options]

-m, --mode <mode>        Mode is the name of the method used
-f, --file <file>        If not set will generate artificially data
--delete_all             cleans all tables in the keyspace
--delete_prev            removes all the tables generated by a previous execution of this method
--join                   merges the traces with the already indexed ones
--n <n>                  Key size (n-tuples)
--k <k>                  Number of frequent pairs used in Signature
-i, --iterations <i>     # iterations, if not set it will be determined by the system

The parameters below are used if the file was not set and data will be randomly generated
-t, --traces <#traces>
-e, --event_types <#event_types>
--lmin <min length>
--lmax <max length>
--help                   prints this usage text
```
Additional Notes:
* The master url was set it in the ENTRYPOINT of the Dockerfile, along with some configuration parameters.
Any master can be used like yarn, or spark cluster e.t.c. Moreover, cassandra and sparks parameters can also
be changed to much the studied scenario.
* In order to use xes files, they need to pass through volume inside the docker container.
The docker run command will be look something like 
```
docker run \
  --mount type=bind,source="$(pwd)"/experiments/input,target=/app/input \
  preprocess -f /input/dataset.xes
```